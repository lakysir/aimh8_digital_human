"use strict";const e=require("../../common/vendor.js"),o={__name:"webview",setup(o){const n=e.ref(""),t=o=>{const n=o.detail.data;console.log("收到网页发送的消息：",n),"redirectBack"===n.action&&e.wx$1.navigateBack()};return e.onBeforeUnmount((()=>{console.log("backup")})),e.onMounted((()=>{const e=getCurrentPages(),o=e[e.length-1].options,{url:t,title:s,bot_id:i,tts_id:c,conversion_id:u,user_id:r,continues:a,fromwebView:d}=o;var l=decodeURIComponent(t);const p=[];s&&p.push(`title=${s}`),u&&p.push(`conversion_id=${encodeURIComponent(u)}`),i&&p.push(`bot_id=${i}`),c&&p.push(`tts_id=${c}`),r&&p.push(`user_id=${r}`),a&&p.push(`continues=${a}`),d&&p.push(`fromwebView=${d}`);const $=p.join("&"),_=`${l}${l.includes("?")?"&":"?"}${$}`;console.log("最终URL:",_),n.value=_})),(o,s)=>({a:n.value,b:e.o(t)})}};wx.createPage(o);
