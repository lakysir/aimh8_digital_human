"use strict";const a=require("../../common/vendor.js"),t=require("../../common/assets.js"),e={data:()=>({avatarId:"",mode:"view",currentTab:0,audioProgress:0,audioDuration:"30",isPlaying:!1,isFavorite:!1,isOwner:!1,tabs:[{name:"åŸºæœ¬ä¿¡æ¯"},{name:"ä½œå“å±•ç¤º"}],avatar:{id:"1",name:"æ•°å­—äººå°åŠ©æ‰‹",image:"/static/images/avatar1.jpg",owner:"å®˜æ–¹",price:10,isPublished:!0,views:5243,usageCount:328,favoriteCount:156,description:"è¿™æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIæ•°å­—äººåŠ©æ‰‹ï¼Œå…·æœ‰æ¸…æ™°çš„è¯­éŸ³å’Œè‡ªç„¶çš„è¡¨æƒ…ï¼Œé€‚åˆå„ç±»å•†åŠ¡æ¼”è®²ã€äº§å“ä»‹ç»å’Œå†…å®¹åˆ›ä½œã€‚å£°éŸ³æ¸©å’Œæœ‰äº²å’ŒåŠ›ï¼Œèƒ½å¤Ÿå‡†ç¡®ä¼ è¾¾ä¿¡æ¯ï¼ŒåŒæ—¶ä¿æŒä¸“ä¸šå½¢è±¡ã€‚",voiceFeature:"å¥³å£°ï¼Œæ¸…æ™°ï¼Œè‡ªç„¶ï¼Œè¯­é€Ÿé€‚ä¸­ï¼Œå¸¦æœ‰è½»å¾®çš„ä¸“ä¸šæ„Ÿã€‚é€‚åˆæ­£å¼åœºåˆå’ŒçŸ¥è¯†åˆ†äº«ç±»å†…å®¹ã€‚",strictReview:!0,tags:["å•†åŠ¡æ¼”è®²","äº§å“ä»‹ç»","çŸ¥è¯†åˆ†äº«","å†…å®¹åˆ›ä½œ"],videos:[{id:"v1",title:"AIæŠ€æœ¯ä»‹ç»",cover:"/static/images/video1.jpg",duration:"2:35",creator:"ç”¨æˆ·A",createTime:new Date(2023,2,15).getTime()},{id:"v2",title:"æ–°äº§å“å‘å¸ƒä¼š",cover:"/static/images/video2.jpg",duration:"3:20",creator:"ç”¨æˆ·B",createTime:new Date(2023,2,10).getTime()},{id:"v3",title:"è¡Œä¸šè¶‹åŠ¿åˆ†æ",cover:"/static/images/video3.jpg",duration:"4:15",creator:"ç”¨æˆ·C",createTime:new Date(2023,2,5).getTime()}]}}),onLoad(a){a.id?(this.avatarId=a.id,this.mode=a.mode||"view",this.fetchAvatarInfo()):"create"===a.mode&&(this.mode="create"),this.isOwner="å®˜æ–¹"===this.avatar.owner},methods:{fetchAvatarInfo(){console.log("è·å–æ•°å­—äººä¿¡æ¯:",this.avatarId)},formatDate(a){const t=new Date(a);return`${t.getFullYear()}-${this.padZero(t.getMonth()+1)}-${this.padZero(t.getDate())}`},padZero:a=>a<10?`0${a}`:a,playVoice(){this.isPlaying?(this.isPlaying=!1,this.stopAudioProgress()):(this.isPlaying=!0,this.startAudioProgress(),a.index.showToast({title:"æ’­æ”¾å£°éŸ³ç¤ºä¾‹",icon:"none"}))},startAudioProgress(){this.audioProgress=0,this.progressTimer=setInterval((()=>{this.audioProgress+=1,this.audioProgress>=100&&(this.audioProgress=0,this.isPlaying=!1,this.stopAudioProgress())}),300)},stopAudioProgress(){this.progressTimer&&clearInterval(this.progressTimer)},playVideo(t){console.log("æ’­æ”¾è§†é¢‘:",t),a.index.navigateTo({url:`/pages/video_player/video_player?id=${t}`})},toggleFavorite(){this.isFavorite=!this.isFavorite,this.isFavorite?(this.avatar.favoriteCount+=1,a.index.showToast({title:"å·²æ”¶è—",icon:"success"})):(this.avatar.favoriteCount-=1,a.index.showToast({title:"å·²å–æ¶ˆæ”¶è—",icon:"none"}))},shareAvatar(){a.index.showShareMenu({withShareTicket:!0})},useAvatar(){this.isOwner?a.index.navigateTo({url:`/pages/avatar_edit/avatar_edit?id=${this.avatar.id}`}):a.index.navigateTo({url:`/pages/script_editor/script_editor?id=${this.avatar.id}`})}},onUnload(){this.stopAudioProgress()}};const i=a._export_sfc(e,[["render",function(e,i,r,s,o,v){return a.e({a:o.avatar.image,b:a.t(o.avatar.name),c:a.t(o.avatar.isPublished?"å·²ä¸Šæ¶":"æœªä¸Šæ¶"),d:o.avatar.isPublished?1:"",e:o.avatar.isPublished?"":1,f:a.t(o.avatar.owner),g:o.avatar.isPublished},o.avatar.isPublished?{h:a.t(o.avatar.price)}:{},{i:a.t(o.avatar.views),j:a.t(o.avatar.usageCount),k:a.t(o.avatar.favoriteCount),l:a.f(o.tabs,((t,e,i)=>({a:a.t(t.name),b:e,c:o.currentTab===e?1:"",d:a.o((a=>o.currentTab=e),e)}))),m:0===o.currentTab},0===o.currentTab?{n:a.t(o.avatar.description),o:a.t(o.avatar.voiceFeature),p:a.o(((...a)=>v.playVoice&&v.playVoice(...a))),q:o.audioProgress+"%",r:a.t(o.audioDuration),s:a.f(o.avatar.tags,((t,e,i)=>({a:a.t(t),b:e}))),t:o.avatar.strictReview?1:"",v:o.avatar.strictReview?"":1}:{},{w:1===o.currentTab},1===o.currentTab?a.e({x:o.avatar.videos.length>0},o.avatar.videos.length>0?{y:a.f(o.avatar.videos,((t,e,i)=>({a:t.cover,b:a.t(t.duration),c:a.t(t.title),d:a.t(t.creator),e:a.t(v.formatDate(t.createTime)),f:e,g:a.o((a=>v.playVideo(t.id)),e)})))}:{z:t._imports_0$5}):{},{A:a.t(o.isFavorite?"â¤ï¸":"ğŸ¤"),B:a.t(o.isFavorite?"å·²æ”¶è—":"æ”¶è—"),C:a.o(((...a)=>v.toggleFavorite&&v.toggleFavorite(...a))),D:a.o(((...a)=>v.shareAvatar&&v.shareAvatar(...a))),E:a.t(o.isOwner?"ç¼–è¾‘æ•°å­—äºº":"ä½¿ç”¨æ•°å­—äºº"),F:!o.avatar.isPublished&&!o.isOwner,G:a.o(((...a)=>v.useAvatar&&v.useAvatar(...a)))})}]]);wx.createPage(i);
