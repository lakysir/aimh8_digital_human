"use strict";const a=require("../../common/vendor.js"),t=require("../../common/assets.js"),e={data:()=>({avatarId:"",mode:"view",currentTab:0,audioProgress:0,audioDuration:"30",isPlaying:!1,isFavorite:!1,isOwner:!1,tabs:[{name:"基本信息"},{name:"作品展示"}],avatar:{id:"1",name:"数字人小助手",image:"/static/images/avatar1.jpg",owner:"官方",price:10,isPublished:!0,views:5243,usageCount:328,favoriteCount:156,description:"这是一个专业的AI数字人助手，具有清晰的语音和自然的表情，适合各类商务演讲、产品介绍和内容创作。声音温和有亲和力，能够准确传达信息，同时保持专业形象。",voiceFeature:"女声，清晰，自然，语速适中，带有轻微的专业感。适合正式场合和知识分享类内容。",strictReview:!0,tags:["商务演讲","产品介绍","知识分享","内容创作"],videos:[{id:"v1",title:"AI技术介绍",cover:"/static/images/video1.jpg",duration:"2:35",creator:"用户A",createTime:new Date(2023,2,15).getTime()},{id:"v2",title:"新产品发布会",cover:"/static/images/video2.jpg",duration:"3:20",creator:"用户B",createTime:new Date(2023,2,10).getTime()},{id:"v3",title:"行业趋势分析",cover:"/static/images/video3.jpg",duration:"4:15",creator:"用户C",createTime:new Date(2023,2,5).getTime()}]}}),onLoad(a){a.id?(this.avatarId=a.id,this.mode=a.mode||"view",this.fetchAvatarInfo()):"create"===a.mode&&(this.mode="create"),this.isOwner="官方"===this.avatar.owner},methods:{fetchAvatarInfo(){console.log("获取数字人信息:",this.avatarId)},formatDate(a){const t=new Date(a);return`${t.getFullYear()}-${this.padZero(t.getMonth()+1)}-${this.padZero(t.getDate())}`},padZero:a=>a<10?`0${a}`:a,playVoice(){this.isPlaying?(this.isPlaying=!1,this.stopAudioProgress()):(this.isPlaying=!0,this.startAudioProgress(),a.index.showToast({title:"播放声音示例",icon:"none"}))},startAudioProgress(){this.audioProgress=0,this.progressTimer=setInterval((()=>{this.audioProgress+=1,this.audioProgress>=100&&(this.audioProgress=0,this.isPlaying=!1,this.stopAudioProgress())}),300)},stopAudioProgress(){this.progressTimer&&clearInterval(this.progressTimer)},playVideo(t){console.log("播放视频:",t),a.index.navigateTo({url:`/pages/video_player/video_player?id=${t}`})},toggleFavorite(){this.isFavorite=!this.isFavorite,this.isFavorite?(this.avatar.favoriteCount+=1,a.index.showToast({title:"已收藏",icon:"success"})):(this.avatar.favoriteCount-=1,a.index.showToast({title:"已取消收藏",icon:"none"}))},shareAvatar(){a.index.showShareMenu({withShareTicket:!0})},useAvatar(){this.isOwner?a.index.navigateTo({url:`/pages/avatar_edit/avatar_edit?id=${this.avatar.id}`}):a.index.navigateTo({url:`/pages/script_editor/script_editor?id=${this.avatar.id}`})}},onUnload(){this.stopAudioProgress()}};const i=a._export_sfc(e,[["render",function(e,i,r,s,o,v){return a.e({a:o.avatar.image,b:a.t(o.avatar.name),c:a.t(o.avatar.isPublished?"已上架":"未上架"),d:o.avatar.isPublished?1:"",e:o.avatar.isPublished?"":1,f:a.t(o.avatar.owner),g:o.avatar.isPublished},o.avatar.isPublished?{h:a.t(o.avatar.price)}:{},{i:a.t(o.avatar.views),j:a.t(o.avatar.usageCount),k:a.t(o.avatar.favoriteCount),l:a.f(o.tabs,((t,e,i)=>({a:a.t(t.name),b:e,c:o.currentTab===e?1:"",d:a.o((a=>o.currentTab=e),e)}))),m:0===o.currentTab},0===o.currentTab?{n:a.t(o.avatar.description),o:a.t(o.avatar.voiceFeature),p:a.o(((...a)=>v.playVoice&&v.playVoice(...a))),q:o.audioProgress+"%",r:a.t(o.audioDuration),s:a.f(o.avatar.tags,((t,e,i)=>({a:a.t(t),b:e}))),t:o.avatar.strictReview?1:"",v:o.avatar.strictReview?"":1}:{},{w:1===o.currentTab},1===o.currentTab?a.e({x:o.avatar.videos.length>0},o.avatar.videos.length>0?{y:a.f(o.avatar.videos,((t,e,i)=>({a:t.cover,b:a.t(t.duration),c:a.t(t.title),d:a.t(t.creator),e:a.t(v.formatDate(t.createTime)),f:e,g:a.o((a=>v.playVideo(t.id)),e)})))}:{z:t._imports_0$5}):{},{A:a.t(o.isFavorite?"❤️":"🤍"),B:a.t(o.isFavorite?"已收藏":"收藏"),C:a.o(((...a)=>v.toggleFavorite&&v.toggleFavorite(...a))),D:a.o(((...a)=>v.shareAvatar&&v.shareAvatar(...a))),E:a.t(o.isOwner?"编辑数字人":"使用数字人"),F:!o.avatar.isPublished&&!o.isOwner,G:a.o(((...a)=>v.useAvatar&&v.useAvatar(...a)))})}]]);wx.createPage(i);
